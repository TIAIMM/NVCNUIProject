<rect name="ModernMinimap">

	<!-- ### Configuration Traits ### -->
	<_x> 0 </_x>							<!-- Screen X offset -->
	<_y> 0 </_y>							<!-- Screen Y offset -->
	<_corner> 0 </_corner>					<!-- Map screen corner -->
	<_background_padding> 8 </_background_padding> <!-- Padding between map window and main background edge -->
	<_line_thickness> 2 </_line_thickness>	<!-- Headline thickness -->
	<_CompassTextScale> 1 </_CompassTextScale> <!-- Direction text scale -->
	<_Fade> 0 </_Fade>						<!-- Icon alpha fade -->
	<_Height> 0 </_Height>					<!-- Icon height indicator -->
	<_QuestHeight> 0 </_QuestHeight>		<!-- Marker height indicator -->
	<_DistMode> 0 </_DistMode>				<!-- Perception based icon distance -->
	<_RadIndicator> 0 </_RadIndicator>		<!-- Radiation indicator -->

	<!-- ### Script Traits ### -->
	<_visible> 1 </_visible>				<!-- General visibility flag -->
	<_visible_pa> 1 </_visible_pa>			<!-- Power armor visibility flag -->
	<_PlrX> 0 </_PlrX>						<!-- Player X world coordinate -->
	<_PlrY> 0 </_PlrY>						<!-- Player Y world coordinate -->
	<_PlrZ> 0 </_PlrZ>						<!-- Player Z world coordinate -->
	<_PlrDeg> 0 </_PlrDeg>					<!-- Player world rotation -->
	<_PlrAV6> 0 </_PlrAV6>					<!-- Player perception -->
	<_PlrDetect> 0 </_PlrDetect>			<!-- Player detection state -->
	<_PlrSneak> 0 </_PlrSneak>				<!-- Player sneak state -->
	<_Dist> 0 </_Dist>						<!-- Max icon distance -->
	<_TileScale> 1 </_TileScale>			<!-- Minimap UI tile scale -->
	<_RotationMode> 1 </_RotationMode>		<!-- Fixed North (0) or Player Heading (1) -->
	<_Interior> 0 </_Interior>				<!-- Player is in interior cell -->
	<_CellDeg> 0 </_CellDeg>				<!-- Cell rotation -->
	<_MapMode> 1 </_MapMode>				<!-- World/Local map mode -->
	<_MapScaleLocal> 1 </_MapScaleLocal>	<!-- Local map image scale -->
	<_MapScaleWorld> 1 </_MapScaleWorld>	<!-- World map image scale -->
	<_ShowQuest> 1 </_ShowQuest>			<!-- Show quest markers -->
	<_ShowCustom> 0 </_ShowCustom>			<!-- Show custom marker -->

	<!-- ### World Map Traits ### -->
	<_WorldMapWidth>
		<copy src="me()" trait="_width" />
		<mul src="me()" trait="_MapScaleWorld" />
		<mul> 14 </mul>
	</_WorldMapWidth>
	<_WorldMapX> <copy src="child(WorldMap)" trait="x" /> </_WorldMapX>
	<_WorldMapY> <copy src="child(WorldMap)" trait="y" /> </_WorldMapY>
	<_PlrWldX> 0 </_PlrWldX>				<!-- Player X world map coordinate -->
	<_PlrWldY> 0 </_PlrWldY>				<!-- Player Y world map coordinate -->
	<_WorldMap> Interface\worldmap\wasteland_nv_1024_no_map.dds </_WorldMap> <!-- World map texture -->

	<!-- ### Texture Path Traits ### -->
	<_MapMarker_0> interface\icons\world map\icon_map_undiscovered.dds </_MapMarker_0>
	<_MapMarker_1> interface\icons\world map\icon_map_city.dds </_MapMarker_1>
	<_MapMarker_2> interface\icons\world map\icon_map_settlement.dds </_MapMarker_2>
	<_MapMarker_3> interface\icons\world map\icon_map_encampment.dds </_MapMarker_3>
	<_MapMarker_4> interface\icons\world map\icon_map_natural_landmark.dds </_MapMarker_4>
	<_MapMarker_5> interface\icons\world map\icon_map_cave.dds </_MapMarker_5>
	<_MapMarker_6> interface\icons\world map\icon_map_factory.dds </_MapMarker_6>
	<_MapMarker_7> interface\icons\world map\icon_map_monument.dds </_MapMarker_7>
	<_MapMarker_8> interface\icons\world map\icon_map_military.dds </_MapMarker_8>
	<_MapMarker_9> interface\icons\world map\icon_map_office.dds </_MapMarker_9>
	<_MapMarker_10> interface\icons\world map\icon_map_ruins_town.dds </_MapMarker_10>
	<_MapMarker_11> interface\icons\world map\icon_map_ruins_urban.dds </_MapMarker_11>
	<_MapMarker_12> interface\icons\world map\icon_map_ruins_sewer.dds </_MapMarker_12>
	<_MapMarker_13> interface\icons\world map\icon_map_metro.dds </_MapMarker_13>
	<_MapMarker_14> interface\icons\world map\icon_map_vault.dds </_MapMarker_14>
	<_QuestMarker_0> Interface\Stentorious\ModernMinimap\MarkerQuestNeutral.dds </_QuestMarker_0>
	<_QuestMarker_1> Interface\Stentorious\ModernMinimap\MarkerQuestBelow.dds </_QuestMarker_1>
	<_QuestMarker_2> Interface\Stentorious\ModernMinimap\MarkerQuestAbove.dds </_QuestMarker_2>
	<_QuestMarker_3> Interface\Stentorious\ModernMinimap\MarkerPlayerNeutral.dds </_QuestMarker_3>
	<_QuestMarker_4> Interface\Stentorious\ModernMinimap\MarkerPlayerBelow.dds </_QuestMarker_4>
	<_QuestMarker_5> Interface\Stentorious\ModernMinimap\MarkerPlayerAbove.dds </_QuestMarker_5>

	<!-- ### Icon Traits ### -->
	<_IconScale> 1 </_IconScale>
	<_IconScaleMul>
		<copy src="me()" trait="_MapScaleWorld" />
		<onlyifnot src="me()" trait="_MapMode" />
		<add>
			<copy src="me()" trait="_MapScaleLocal" />
			<onlyif src="me()" trait="_MapMode" />
		</add>
		<min> 1 </min>
		<sub> 1 </sub>
		<div> 2 </div>
		<add> 1 </add>
		<mul src="me()" trait="_IconScale" />
		<mul src="me()" trait="_TileScale" />
	</_IconScaleMul>
	<_PlayerPathSize>
		<copy> 6 </copy>
		<mul src="me()" trait="_IconScaleMul" />
	</_PlayerPathSize>
	<_IconWorldSize>
		<copy> 40 </copy>
		<mul src="me()" trait="_IconScaleMul" />
	</_IconWorldSize>
	<_IconLocalSize>
		<copy> 24 </copy>
		<mul src="me()" trait="_IconScaleMul" />
	</_IconLocalSize>
	<_IconQuestSize>
		<copy> 18 </copy>
		<mul src="me()" trait="_IconScaleMul" />
	</_IconQuestSize>
	<_DropShadowOffset>
		<copy> 1.25 </copy>
		<mul src="me()" trait="_TileScale" />
	</_DropShadowOffset>
	<_IconQuestPulse> 0 </_IconQuestPulse>
	<_IconQuestAlpha>
		<copy> 1 </copy>
		<sub src="me()" trait="_IconQuestPulse" />
		<mul> 255 </mul>
		<max> 0 </max>
	</_IconQuestAlpha>

	<!-- ### ModernMinimap.dll Traits ### -->
	<_ColorMode> 0 </_ColorMode>			<!-- Render Mode: Classic (0) or Full Color (1) -->
	<_MapOriginX> 0 </_MapOriginX>			<!-- Map center Y world coordinate -->
	<_MapOriginY> 0 </_MapOriginY>			<!-- Map center X world coordinate -->
	<_ForceUpdate> 0 </_ForceUpdate>		<!-- Force render update every frame -->
	<_ToggleUpdate> <copy src="me()" trait="visible" /> </_ToggleUpdate>

	<!-- Update render when current texture leaves bounds of the window -->
	<_CellPlrDeg>
		<copy> 0 </copy>
		<sub>
			<copy src="me()" trait="_CellDeg" />
			<sub src="me()" trait="_PlrDeg" />
			<onlyif src="me()" trait="_RotationMode" />
		</sub>
	</_CellPlrDeg>
	<_CellPlrDegCos> <cos src="me()" trait="_CellPlrDeg" /> </_CellPlrDegCos>
	<_CellPlrDegSin> <sin src="me()" trait="_CellPlrDeg" /> </_CellPlrDegSin>
	<_UpdateWidth>
		<copy> 2 </copy>
		<sub>
			<copy src="me()" trait="_CellPlrDegCos" />
			<abs></abs>
			<add>
				<copy src="me()" trait="_CellPlrDegSin" />
				<abs></abs>
			</add>
		</sub>
		<div> 2 </div>
	</_UpdateWidth>
	<_Render>
		<copy src="me()" trait="_ForceUpdate" />
		<or>
			<copy src="child(MapRender)" trait="_x" />
			<sub> 0.5 </sub>
			<abs></abs>
			<gt>
				<copy src="me()" trait="_UpdateWidth" />
				<sub src="me()" trait="_RenderUpdateX" />
				<add> 0.5 </add>
			</gt>
		</or>
		<or>
			<copy src="child(MapRender)" trait="_y" />
			<sub> 0.5 </sub>
			<abs></abs>
			<gt>
				<copy src="me()" trait="_UpdateWidth" />
				<sub src="me()" trait="_RenderUpdateY" />
				<add> 0.5 </add>
			</gt>
		</or>
		<and src="me()" trait="_ToggleUpdate" />
	</_Render>

	<!-- Render width / 2 (Game units) -->
	<_Frustum> 2048 </_Frustum>
	<_FrustumSize>
		<copy src="me()" trait="_Frustum" />
		<div src="me()" trait="_MapScaleLocal" />
	</_FrustumSize>

	<!-- Orthographic render camera offset from player z coordinate -->
	<_CameraOffset>
		<copy> 10000 </copy>
		<sub>
			<copy> 9800 </copy>
			<onlyif>
				<copy src="me()" trait="_ColorMode" />
				<and src="me()" trait="_Interior" />
			</onlyif>
		</sub>
	</_CameraOffset>

	<!-- Map window size -->
	<_width>
		<copy> 256 </copy>
		<mul src="me()" trait="_TileScale" />
	</_width>

	<!-- World to map coordinates translation -->
	<_WorldScale>
		<copy src="me()" trait="_MapScaleLocal" />
		<div src="me()" trait="_Frustum" />
	</_WorldScale>

	<!-- Radiation icon alpha pulse -->
	<_RadiationPulse> 0 </_RadiationPulse>

	<!-- Rotation calculations -->
	<_CellDegCos> <cos src="me()" trait="_CellDeg" /> </_CellDegCos>
	<_CellDegSin> <sin src="me()" trait="_CellDeg" /> </_CellDegSin>
	<_PlrDegCos> <cos src="me()" trait="_PlrDeg" /> </_PlrDegCos>
	<_PlrDegSin> <sin src="me()" trait="_PlrDeg" /> </_PlrDegSin>
	<_IconDegCos>
		<copy> 0 </copy>
		<add>
			<copy src="me()" trait="_PlrDegCos" />
			<onlyif src="me()" trait="_RotationMode" />
		</add>
		<add>
			<copy src="me()" trait="_CellDegCos" />
			<onlyifnot src="me()" trait="_RotationMode" />
		</add>
	</_IconDegCos>
	<_IconDegSin>
		<copy> 0 </copy>
		<add>
			<copy src="me()" trait="_PlrDegSin" />
			<onlyif src="me()" trait="_RotationMode" />
		</add>
		<add>
			<copy src="me()" trait="_CellDegSin" />
			<onlyifnot src="me()" trait="_RotationMode" />
		</add>
	</_IconDegSin>

	<!-- Calculates distance from player where icons become visible -->
	<_DistCalc>
		<copy> 0 </copy>
		<add src="me()" trait="_Dist" />
		<onlyifnot src="me()" trait="_DistMode" />
		<add>
			<copy src="me()" trait="_Dist" />
			<div> 1680 </div>
			<mul>
				<log src="me()" trait="_PlrAV6" />
				<div> <log> 4 </log> </div>
				<mul> 1000 </mul>
				<add> 1100 </add>
				<div> 1.65 </div>
			</mul>
			<onlyif src="me()" trait="_DistMode" />
		</add>
	</_DistCalc>

	<!-- Player combat state -->
	<_InCombat>
		<copy src="me()" trait="_PlrDetect" />
		<eq> 1 </eq>
		<or>
			<copy src="me()" trait="_PlrDetect" />
			<eq> 3 </eq>
		</or>
	</_InCombat>

	<!-- Map color control -->
	<_systemcolor>
		<copy src="me()" trait="_systemcolor_0" />
		<onlyifnot src="me()" trait="_InCombat" />
		<add>
			<copy> &hudalt; </copy>
			<onlyif src="me()" trait="_InCombat" />
		</add>
	</_systemcolor>

	<!-- Icon color control -->
	<_systemcolor_map>
		<copy src="me()" trait="_systemcolor_0" />
		<onlyifnot src="io()" trait="_ColorfulMapMarkerFix" />
	</_systemcolor_map>
	<_systemcolor_-1>
		<copy src="me()" trait="_systemcolor_0" />
		<onlyifnot src="io()" trait="_ySIColorfulIconsFix" />
	</_systemcolor_-1>
	<_systemcolor_0> &hudmain; </_systemcolor_0>
	<_systemcolor_1> &hudalt; </_systemcolor_1>
	<_systemcolor_2> <copy src="me()" trait="_systemcolor_0" /> </_systemcolor_2>
	<_systemcolor_3> 0 </_systemcolor_3>
	<_red_-1> 255 </_red_-1>
	<_red_0> 255 </_red_0>
	<_red_1> 255 </_red_1>
	<_red_2> 255 </_red_2>
	<_red_3> 255 </_red_3>
	<_green_-1> 255 </_green_-1>
	<_green_0> 255 </_green_0>
	<_green_1> 255 </_green_1>
	<_green_2> 255 </_green_2>
	<_green_3> 255 </_green_3>
	<_blue_-1> 255 </_blue_-1>
	<_blue_0> 255 </_blue_0>
	<_blue_1> 255 </_blue_1>
	<_blue_2> 255 </_blue_2>
	<_blue_3> 255 </_blue_3>

	<!-- Text Scale -->
	<_info_text_zoom>
		<copy> 60 </copy>
		<mul src="me()" trait="_TileScale" />
	</_info_text_zoom>
	<_compass_text_zoom>
		<copy src="me()" trait="_CompassTextScale" />
		<mul src="me()" trait="_TileScale" />
	</_compass_text_zoom>

	<!-- Realtime Pip-Boy -->
	<_CardinalOffset> 0.5 </_CardinalOffset>
	<_RenderUpdateX> 0.5 </_RenderUpdateX>
	<_RenderUpdateY> 0.5 </_RenderUpdateY>
	<_WidthRatio> 1 </_WidthRatio>
	<_HeightRatio> 1 </_HeightRatio>
	<_ScalerWidthLocal>
		<copy> 0.5 </copy>
		<mul src="me()" trait="_WidthRatio" />
	</_ScalerWidthLocal>
	<_ScalerHeightLocal>
		<copy> 0.5 </copy>
		<mul src="me()" trait="_HeightRatio" />
	</_ScalerHeightLocal>
	<_ScalerWidthWorld>
		<copy src="me()" trait="_ScalerWidthLocal" />
		<div>
			<copy src="me()" trait="_WorldMapWidth" />
			<div src="me()" trait="_width" />
		</div>
	</_ScalerWidthWorld>
	<_ScalerHeightWorld>
		<copy src="me()" trait="_ScalerHeightLocal" />
		<div>
			<copy src="me()" trait="_WorldMapWidth" />
			<div src="me()" trait="_width" />
		</div>
	</_ScalerHeightWorld>

	<_MarkerMaxX>
		<copy src="me()" trait="width" />
		<sub>
			<copy src="me()" trait="width" />
			<mul src="me()" trait="_WidthRatio" />
		</sub>
		<div> 2 </div>
		<add> 3 </add>
	</_MarkerMaxX>
	<_MarkerMinX>
		<copy src="me()" trait="width" />
		<sub src="me()" trait="_MarkerMaxX" />
		<sub>
			<copy> 18 </copy>
			<mul src="me()" trait="_IconScaleMul" />
		</sub>
	</_MarkerMinX>

	<!-- Interface Control (DO NOT TOUCH) -->
	<visible>
		<copy src="ReticleCenter" trait="visible" />
		<or src="AmmoTypeLabel" trait="visible" />
		<or src="ActionPoints" trait="visible" />
		<or src="HitPoints" trait="visible" />
		<and src="me()" trait="_visible" />
		<and src="me()" trait="_visible_pa" />
	</visible>
	<x>
		<copy src="me()" trait="_background_padding" />
		<add>
			<copy src="me()" trait="_x" />
			<onlyif>
				<copy src="me()" trait="_corner" />
				<eq> 0 </eq>
				<or>
					<copy src="me()" trait="_corner" />
					<eq> 3 </eq>
				</or>
			</onlyif>
		</add>
		<add>
			<copy src="screen()" trait="width" />
			<sub src="child(Background)" trait="width" />
			<sub src="me()" trait="_x" />
			<onlyif>
				<copy src="me()" trait="_corner" />
				<eq> 1 </eq>
				<or>
					<copy src="me()" trait="_corner" />
					<eq> 2 </eq>
				</or>
			</onlyif>
		</add>
	</x>
	<y>
		<copy src="me()" trait="_background_padding" />
		<add>
			<copy src="me()" trait="_y" />
			<onlyif>
				<copy src="me()" trait="_corner" />
				<lt> 2 </lt>
			</onlyif>
		</add>
		<add>
			<copy src="screen()" trait="height" />
			<sub src="child(Background)" trait="height" />
			<sub src="me()" trait="_y" />
			<onlyif>
				<copy src="me()" trait="_corner" />
				<gte> 2 </gte>
			</onlyif>
		</add>
	</y>
	<depth> 10 </depth>
	<locus> 1 </locus>
	<clipwindow> 1 </clipwindow>
	<width> <copy src="me()" trait="_width" /> </width>
	<height> <copy src="me()" trait="_width" /> </height>

	<!-- Map Render Texture -->
	<image name="MapRender">
		<visible>
			<copy src="parent()" trait="_MapMode" />
			<and src="parent()" trait="_ToggleUpdate" />
		</visible>
		<alpha> 255 </alpha>
		<depth> 0 </depth>
		<x>
			<copy src="me()" trait="_x" />
			<mul src="parent()" trait="_width" />
			<sub>
				<copy src="me()" trait="width" />
				<div> 2 </div>
			</sub>
		</x>
		<y>
			<copy src="me()" trait="_y" />
			<mul src="parent()" trait="_width" />
			<sub>
				<copy src="me()" trait="height" />
				<div> 2 </div>
			</sub>
		</y>
		<clips> 1 </clips>
		<_DegOffset>
			<copy src="parent()" trait="_PlrDeg" />
			<sub src="parent()" trait="_CellDeg" />
			<div> 360 </div>
		</_DegOffset>
		<rotateaxisx>
			<copy src="parent()" trait="_width" />
			<div> 2 </div>
			<sub src="me()" trait="x" />
		</rotateaxisx>
		<rotateaxisy>
			<copy src="parent()" trait="_width" />
			<div> 2 </div>
			<sub src="me()" trait="y" />
		</rotateaxisy>
		<rotateangle>
			<copy> 6.2831 </copy>
			<mul src="me()" trait="_DegOffset" />
			<onlyif src="parent()" trait="_RotationMode" />
		</rotateangle>
		<width>
			<copy src="parent()" trait="_width" />
			<mul> 2 </mul>
		</width>
		<height> <copy src="me()" trait="width" /> </height>
		<zoom> &scale; </zoom>
		<systemcolor>
			<copy src="parent()" trait="_systemcolor_0" />
			<onlyifnot src="parent()" trait="_ColorMode" />
		</systemcolor>
		<brightness>
			<copy> 255 </copy>
			<add>
				<copy src="me()" trait="_brightness" />
				<onlyifnot src="parent()" trait="_ColorMode" />
			</add>
		</brightness>
		<filename> Interface\Shared\solid.dds </filename>
		<_x>
			<copy> 0.5 </copy>
			<add>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="Parent()" trait="_CellDegCos" />
			</add>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="Parent()" trait="_CellDegSin" />
			</sub>
		</_x>
		<_y>
			<copy> 0.5 </copy>
			<sub>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="Parent()" trait="_CellDegSin" />
			</sub>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="Parent()" trait="_CellDegCos" />
			</sub>
		</_y>
		<_PosXOffset>
			<copy src="parent()" trait="_MapOriginX" />
			<sub src="parent()" trait="_PlrX" />
			<mul src="parent()" trait="_WorldScale" />
		</_PosXOffset>
		<_PosYOffset>
			<copy src="parent()" trait="_MapOriginY" />
			<sub src="parent()" trait="_PlrY" />
			<mul src="parent()" trait="_WorldScale" />
		</_PosYOffset>
		<_brightness> 128 </_brightness>
	</image>

	<!-- World Map Texture -->
	<image name="WorldMap">
		<visible>
			<not src="parent()" trait="_MapMode" />
			<and src="parent()" trait="_ToggleUpdate" />
		</visible>
		<alpha> 204 </alpha>
		<depth> 0 </depth>
		<x>
			<copy src="parent()" trait="_width" />
			<div> 2 </div>
			<sub>
				<copy src="me()" trait="width" />
				<mul src="parent()" trait="_PlrWldX" />
			</sub>
		</x>
		<y>
			<copy src="parent()" trait="_width" />
			<div> 2 </div>
			<sub>
				<copy src="me()" trait="height" />
				<mul src="parent()" trait="_PlrWldY" />
			</sub>
		</y>
		<clips> 1 </clips>
		<_DegOffset>
			<copy src="parent()" trait="_PlrDeg" />
			<sub src="parent()" trait="_CellDeg" />
			<div> 360 </div>
		</_DegOffset>
		<rotateaxisx>
			<copy src="parent()" trait="_width" />
			<div> 2 </div>
			<sub src="me()" trait="x" />
		</rotateaxisx>
		<rotateaxisy>
			<copy src="parent()" trait="_width" />
			<div> 2 </div>
			<sub src="me()" trait="y" />
		</rotateaxisy>
		<rotateangle>
			<copy> 6.2831 </copy>
			<mul src="me()" trait="_DegOffset" />
			<onlyif src="parent()" trait="_RotationMode" />
		</rotateangle>
		<width> <copy src="parent()" trait="_WorldMapWidth" /> </width>
		<height> <copy src="me()" trait="width" /> </height>
		<zoom> &scale; </zoom>
		<systemcolor>
			<copy src="parent()" trait="_systemcolor_0" />
			<onlyifnot src="parent()" trait="_ColorMode" />
		</systemcolor>
		<brightness> 255 </brightness>
		<filename> <copy src="parent()" trait="_WorldMap" /> </filename>
	</image>

	<!-- Map Window Background -->
	<image name="Background">
		<visible> 1 </visible>
		<alpha> 200 </alpha>
		<depth> -1 </depth>
		<x>
			<copy> 0 </copy>
			<sub src="parent()" trait="_background_padding" />
		</x>
		<y>
			<copy> 0 </copy>
			<sub src="parent()" trait="_background_padding" />
		</y>
		<width>
			<copy src="parent()" trait="_width" />
			<add>
				<copy src="parent()" trait="_background_padding" />
				<mul> 2 </mul>
			</add>
		</width>
		<height> <copy src="me()" trait="width" /> </height>
		<zoom> &scale; </zoom>
		<systemcolor> 0 </systemcolor>
		<red> 0 </red>
		<green> 0 </green>
		<blue> 0 </blue>
		<filename> Interface\Shared\solid.dds </filename>
	</image>

	<!-- Headlines -->
	<image name="Headline_VL">
		<x>
			<copy> 0 </copy>
			<sub src="parent()" trait="_line_thickness" />
		</x>
		<width> <copy src="parent()" trait="_line_thickness" /> </width>
		<height> <copy src="parent()" trait="_width" /> </height>
		<systemcolor> <copy src="parent()" trait="_systemcolor" /> </systemcolor>
		<brightness> 255 </brightness>
		<filename> Interface\Shared\solid.dds </filename>
	</image>
	<image name="Headline_VR">
		<x> <copy src="parent()" trait="_width" /> </x>
		<width> <copy src="parent()" trait="_line_thickness" /> </width>
		<height> <copy src="parent()" trait="_width" /> </height>
		<systemcolor> <copy src="parent()" trait="_systemcolor" /> </systemcolor>
		<brightness> 255 </brightness>
		<filename> Interface\Shared\solid.dds </filename>
	</image>
	<image name="Headline_HT">
		<x> <copy src="sibling(Headline_VL)" trait="x" /> </x>
		<y> <copy src="me()" trait="x" /> </y>
		<width>
			<copy src="parent()" trait="_width" />
			<add src="parent()" trait="_line_thickness" />
			<add src="parent()" trait="_line_thickness" />
		</width>
		<height> <copy src="parent()" trait="_line_thickness" /> </height>
		<systemcolor> <copy src="parent()" trait="_systemcolor" /> </systemcolor>
		<brightness> 255 </brightness>
		<filename> Interface\Shared\solid.dds </filename>
	</image>
	<image name="Headline_HB">
		<x> <copy src="sibling(Headline_VL)" trait="x" /> </x>
		<y> <copy src="parent()" trait="_width" /> </y>
		<width>
			<copy src="parent()" trait="_width" />
			<add src="parent()" trait="_line_thickness" />
			<add src="parent()" trait="_line_thickness" />
		</width>
		<height> <copy src="parent()" trait="_line_thickness" /> </height>
		<systemcolor> <copy src="parent()" trait="_systemcolor" /> </systemcolor>
		<brightness> 255 </brightness>
		<filename> Interface\Shared\solid.dds </filename>
	</image>
	<image name="Headline_VC">
		<visible>
			<copy src="parent()" trait="_MapMode" />
			<and src="me()" trait="_visible" />
		</visible>
		<alpha> 102 </alpha>
		<x>
			<copy src="parent()" trait="_width" />
			<sub src="me()" trait="width" />
			<div> 2 </div>
		</x>
		<y>
			<copy src="me()" trait="width" />
			<sub src="parent()" trait="_width" />
			<div> 2 </div>
		</y>
		<width>
			<copy src="parent()" trait="_line_thickness" />
			<mul src="parent()" trait="_TileScale" />
		</width>
		<height> <copy src="parent()" trait="_width" /> <mul> 2 </mul> </height>
		<clips> 1 </clips>
		<rotateaxisx>
			<copy src="me()" trait="width" />
			<div> 2 </div>
		</rotateaxisx>
		<rotateaxisy>
			<copy src="me()" trait="height" />
			<div> 2 </div>
		</rotateaxisy>
		<rotateangle> <copy src="sibling(MapRender)" trait="rotateangle" /> </rotateangle>
		<systemcolor> <copy src="parent()" trait="_systemcolor_0" /> </systemcolor>
		<brightness> 153 </brightness>
		<filename> Interface\Shared\solid.dds </filename>
		<_visible> 0 </_visible>
	</image>
	<image name="Headline_HC">
		<visible> <copy src="sibling(Headline_VC)" trait="visible" /> </visible>
		<alpha> 102 </alpha>
		<x> <copy src="sibling(Headline_VC)" trait="y" /> </x>
		<y> <copy src="sibling(Headline_VC)" trait="x" /> </y>
		<width> <copy src="sibling(Headline_VC)" trait="height" /> </width>
		<height> <copy src="sibling(Headline_VC)" trait="width" /> </height>
		<clips> 1 </clips>
		<rotateaxisx>
			<copy src="me()" trait="width" />
			<div> 2 </div>
		</rotateaxisx>
		<rotateaxisy>
			<copy src="me()" trait="height" />
			<div> 2 </div>
		</rotateaxisy>
		<rotateangle> <copy src="sibling(MapRender)" trait="rotateangle" /> </rotateangle>
		<systemcolor> <copy src="parent()" trait="_systemcolor_0" /> </systemcolor>
		<brightness> 153 </brightness>
		<filename> Interface\Shared\solid.dds </filename>
	</image>

	<image name="Scan">
		<visible> 0 </visible>
		<alpha> 204 </alpha>
		<depth> 501 </depth>
		<x>
			<copy src="parent()" trait="_width" />
			<div> 2 </div>
			<mul> -1 </mul>
		</x>
		<y> 0 </y>
		<width>
			<copy src="parent()" trait="_width" />
			<mul> 2 </mul>
		</width>
		<height>
			<copy> 24 </copy>
			<mul src="parent()" trait="_TileScale" />
		</height>
		<clips> 1 </clips>
		<zoom> &scale; </zoom>
		<systemcolor> <copy src="parent()" trait="_systemcolor_0" /> </systemcolor>
		<filename> fade_to_bottom.dds </filename>
		<texatlas> Interface\InterfaceShared.tai </texatlas>
	</image>

	<hotrect name="Player">
		<visible> 1 </visible>
		<locus> 1 </locus>
		<x>
			<copy src="parent()" trait="_width" />
			<sub src="me()" trait="width" />
			<div> 2 </div>
		</x>
		<y> <copy src="me()" trait="x" /> </y>
		<depth> 500 </depth>
		<width>
			<copy> 36 </copy>
			<mul src="parent()" trait="_IconScaleMul" />
		</width>
		<height> <copy src="me()" trait="width" /> </height>
		<zoom> &scale; </zoom>
		<filename> Interface\Stentorious\ModernMinimap\Player.dds </filename>

		<_DegOffset>
			<copy src="parent()" trait="_CellDeg" />
			<sub src="parent()" trait="_PlrDeg" />
			<div> 360 </div>
		</_DegOffset>

		<image name="Icon">
			<visible> 1 </visible>
			<depth> 0 </depth>
			<rotateaxisx>
				<copy src="me()" trait="width" />
				<div> 2 </div>
			</rotateaxisx>
			<rotateaxisy>
				<copy src="me()" trait="height" />
				<div> 2 </div>
			</rotateaxisy>
			<rotateangle>
				<copy> 6.2831 </copy>
				<mul src="parent()" trait="_DegOffset" />
				<onlyifnot src="grandparent()" trait="_RotationMode" />
				<sub> 0.385 </sub>
			</rotateangle>
			<height> <copy src="parent()" trait="height" /> </height>
			<width> <copy src="parent()" trait="width" /> </width>
			<zoom> &scale; </zoom>
			<systemcolor> <copy src="grandparent()" trait="_systemcolor" /> </systemcolor>
			<filename> <copy src="parent()" trait="filename" /> </filename>
		</image>

		<image name="DropShadow">
			<visible> 1 </visible>
			<alpha> 127.5 </alpha>
			<depth> -1 </depth>
			<x>	<copy src="grandparent()" trait="_DropShadowOffset" /> </x>
			<y> <copy src="me()" trait="x" /> </y>
			<rotateaxisx> <copy src="sibling(Icon)" trait="rotateaxisx" /> </rotateaxisx>
			<rotateaxisy> <copy src="sibling(Icon)" trait="rotateaxisy" /> </rotateaxisy>
			<rotateangle> <copy src="sibling(Icon)" trait="rotateangle" /> </rotateangle>
			<height> <copy src="parent()" trait="height" /> </height>
			<width> <copy src="parent()" trait="width" /> </width>
			<zoom> &scale; </zoom>
			<systemcolor> 0 </systemcolor>
			<red> 0 </red>
			<green> 0 </green>
			<blue> 0 </blue>
			<brightness> <copy src="sibling(Icon)" trait="brightness" /> </brightness>
			<filename> <copy src="sibling(icon)" trait="filename" /> </filename>
		</image>

	</hotrect>

	<!-- Map Text Display -->
	<text name="InfoText">
		<visible> 1 </visible>
		<alpha> 0 </alpha>
		<depth> 504 </depth>
		<x>	5 </x>
		<y>
			<copy> 5 </copy>
			<mul src="parent()" trait="_TileScale" />
			<add> 5 </add>
		</y>
		<zoom> <copy src="parent()" trait="_info_text_zoom" /> </zoom>
		<systemcolor> <copy src="parent()" trait="_systemcolor" /> </systemcolor>
		<brightness> 255 </brightness>
		<font> 7 </font>
		<string> 1x </string>
	<_VUI+OutlineIntensity>3</_VUI+OutlineIntensity>
	<_VUI+ShadowOffset>1</_VUI+ShadowOffset>
</text>
<include src="VUI+\outline.xml"/>
	<text name="LocationText">
		<visible> 0 </visible>
		<alpha> 255 </alpha>
		<depth> 504 </depth>
		<x>	<copy src="sibling(InfoText)" trait="x" /> </x>
		<y>
			<copy> 5 </copy>
			<mul src="parent()" trait="_TileScale" />
			<add src="parent()" trait="_width" />
			<sub src="me()" trait="height" />
			<sub> 3 </sub>
		</y>
		<zoom> <copy src="parent()" trait="_info_text_zoom" /> </zoom>
		<systemcolor> <copy src="parent()" trait="_systemcolor" /> </systemcolor>
		<brightness> 255 </brightness>
		<font> 7 </font>
		<string> Location </string>
		<wrapwidth>
			<copy src="parent()" trait="_width" />
			<sub> 10 </sub>
		</wrapwidth>
	<_VUI+OutlineIntensity>3</_VUI+OutlineIntensity>
	<_VUI+ShadowOffset>1</_VUI+ShadowOffset>
</text>
<include src="VUI+\outline.xml"/>

	<!-- Cardinal Directions -->
	<text name="NorthText">
		<include src="Stentorious\ModernMinimap\CardinalText.xml" />
		<string> N </string>
		<_x>
			<copy> 0.5 </copy>
			<sub>
				<copy src="parent()" trait="_CardinalOffset" />
				<mul src="parent()" trait="_CellPlrDegSin" />
			</sub>
		</_x>
		<_y>
			<copy> 0.5 </copy>
			<sub>
				<copy src="parent()" trait="_CardinalOffset" />
				<mul src="parent()" trait="_CellPlrDegCos" />
			</sub>
		</_y>
	</text>
	<text name="SouthText">
		<include src="Stentorious\ModernMinimap\CardinalText.xml" />
		<string> S </string>
		<_x>
			<copy> 0.5 </copy>
			<add>
				<copy src="parent()" trait="_CardinalOffset" />
				<mul src="parent()" trait="_CellPlrDegSin" />
			</add>
		</_x>
		<_y>
			<copy> 0.5 </copy>
			<add>
				<copy src="parent()" trait="_CardinalOffset" />
				<mul src="parent()" trait="_CellPlrDegCos" />
			</add>
		</_y>
	</text>
	<text name="EastText">
		<include src="Stentorious\ModernMinimap\CardinalText.xml" />
		<x>
			<copy src="me()" trait="_x" />
			<mul src="parent()" trait="width" />
			<sub>
				<copy> 3.25 </copy>
				<mul src="parent()" trait="_compass_text_zoom" />
			</sub>
		</x>
		<string> E </string>
		<_x>
			<copy> 0.5 </copy>
			<add>
				<copy src="parent()" trait="_CardinalOffset" />
				<mul src="parent()" trait="_CellPlrDegCos" />
			</add>
		</_x>
		<_y>
			<copy> 0.5 </copy>
			<sub>
				<copy src="parent()" trait="_CardinalOffset" />
				<mul src="parent()" trait="_CellPlrDegSin" />
			</sub>
		</_y>
	</text>
	<text name="WestText">
		<include src="Stentorious\ModernMinimap\CardinalText.xml" />
		<string> W </string>
		<_x>
			<copy> 0.5 </copy>
			<sub>
				<copy src="parent()" trait="_CardinalOffset" />
				<mul src="parent()" trait="_CellPlrDegCos" />
			</sub>
		</_x>
		<_y>
			<copy> 0.5 </copy>
			<add>
				<copy src="parent()" trait="_CardinalOffset" />
				<mul src="parent()" trait="_CellPlrDegSin" />
			</add>
		</_y>
	</text>

	<image name="RadiationIcon">
		<visible> <copy src="parent()" trait="_RadIndicator" /> </visible>
		<alpha>
			<copy src="radiation_text_value" trait="alpha" />
			<mul src="parent()" trait="_RadiationPulse" />
		</alpha>
		<locus> 1 </locus>
		<depth> 504 </depth>
		<x>
			<copy src="parent()" trait="_width" />
			<sub> 5 </sub>
			<sub src="me()" trait="width" />
		</x>
		<y>
			<copy src="sibling(InfoText)" trait="y" />
			<sub>
				<copy src="me()" trait="width" />
				<div> 4 </div>
			</sub>
		</y>
		<width>
			<copy> 24 </copy>
			<mul src="parent()" trait="_TileScale" />
		</width>
		<height> <copy src="me()" trait="width" /> </height>
		<zoom> &scale; </zoom>
		<systemcolor> 2 </systemcolor>
		<filename> Interface\Stentorious\ModernMinimap\Radiation.dds  </filename>
		<image name="DropShadow">
			<visible> 1 </visible>
			<alpha>
				<copy src="parent()" trait="alpha" />
				<div> 2 </div>
			</alpha>
			<depth> -1 </depth>
			<x>	<copy src="grandparent()" trait="_DropShadowOffset" /> </x>
			<y> <copy src="me()" trait="x" /> </y>
			<height> <copy src="parent()" trait="height" /> </height>
			<width> <copy src="parent()" trait="width" /> </width>
			<zoom> &scale; </zoom>
			<systemcolor> 0 </systemcolor>
			<red> 0 </red>
			<green> 0 </green>
			<blue> 0 </blue>
			<filename> <copy src="parent()" trait="filename" /> </filename>
		</image>
	</image>
	<text name="RadiationLabel">
		<visible> <copy src="parent()" trait="_RadIndicator" /> </visible>
		<alpha> <copy src="radiation_text" trait="alpha" /> </alpha>
		<depth> 504 </depth>
		<x>
			<copy src="sibling(RadiationIcon)" trait="x" />
			<sub>
				<copy> 7 </copy>
				<mul src="parent()" trait="_TileScale" />
			</sub>
		</x>
		<y> <copy src="sibling(InfoText)" trait="y" /> </y>
		<zoom> <copy src="parent()" trait="_info_text_zoom" /> </zoom>
		<systemcolor> 2 </systemcolor>
		<font> 7 </font>
		<justify> &right; </justify>
		<string> /SEC </string>
	<_VUI+OutlineIntensity>3</_VUI+OutlineIntensity>
	<_VUI+ShadowOffset>1</_VUI+ShadowOffset>
</text>
<include src="VUI+\outline.xml"/>
	<text name="RadiationValue">
		<visible> <copy src="parent()" trait="_RadIndicator" /> </visible>
		<alpha> <copy src="radiation_text_value" trait="alpha" /> </alpha>
		<depth> 504 </depth>
		<x>
			<copy src="sibling(RadiationLabel)" trait="x" />
			<sub>
				<copy src="sibling(RadiationLabel)" trait="width" />
				<mul> 1.1 </mul>
			</sub>
		</x>
		<y> <copy src="sibling(InfoText)" trait="y" /> </y>
		<zoom> <copy src="parent()" trait="_info_text_zoom" /> </zoom>
		<systemcolor> 2 </systemcolor>
		<font> 7 </font>
		<justify> &right; </justify>
		<string> <copy src="radiation_text_value" trait="string" /> </string>
	<_VUI+OutlineIntensity>3</_VUI+OutlineIntensity>
	<_VUI+ShadowOffset>1</_VUI+ShadowOffset>
</text>
<include src="VUI+\outline.xml"/>

	<rect name="CustomMarkerLocal">
		<visible>
			<copy src="parent()" trait="_MapMode" />
			<and src="parent()" trait="_ToggleUpdate" />
			<and src="parent()" trait="_ShowQuest" />
			<and src="parent()" trait="_ShowCustom" />
		</visible>
		<width> <copy src="parent()" trait="width" /> </width>
		<height> <copy src="parent()" trait="height" /> </height>
	</rect>

	<rect name="CustomMarkerWorld">
		<visible>
			<not src="parent()" trait="_MapMode" />
			<and src="parent()" trait="_ToggleUpdate" />
			<and src="parent()" trait="_ShowQuest" />
			<and src="parent()" trait="_ShowCustom" />
			<and> <not src="parent()" trait="_Interior" /> </and>
		</visible>
		<width> <copy src="parent()" trait="width" /> </width>
		<height> <copy src="parent()" trait="height" /> </height>
	</rect>

</rect>

<!-- Local Map Icon Rect -->
<template name="Minimap_Icon_Rect">
	<rect name="Minimap_Icon_Rect">
		<visible>
			<copy src="parent()" trait="_MapMode" />
			<and src="parent()" trait="_ToggleUpdate" />
		</visible>
		<width> <copy src="parent()" trait="width" /> </width>
		<height> <copy src="parent()" trait="height" /> </height>
	</rect>
</template>

<!-- Local Map Quest Marker Rect -->
<template name="Minimap_Quest_Rect">
	<rect name="Minimap_Quest_Rect">
		<visible>
			<copy src="parent()" trait="_MapMode" />
			<and src="parent()" trait="_ToggleUpdate" />
			<and src="parent()" trait="_ShowQuest" />
		</visible>
		<width> <copy src="parent()" trait="width" /> </width>
		<height> <copy src="parent()" trait="height" /> </height>
	</rect>
</template>

<!-- World Map Icon Rect -->
<template name="WorldMap_Icon_Rect">
	<rect name="WorldMap_Icon_Rect">
		<visible>
			<not src="parent()" trait="_MapMode" />
			<and src="parent()" trait="_ToggleUpdate" />
		</visible>
		<width> <copy src="parent()" trait="width" /> </width>
		<height> <copy src="parent()" trait="height" /> </height>

		<hotrect name="Discover">
			<visible> 1 </visible>
			<locus> 1 </locus>
			<depth> 450 </depth>
			<clips> 1 </clips>
			<x>
				<copy src="grandparent()" trait="_WorldMapX" />
				<add>
					<copy src="me()" trait="_x" />
					<mul src="grandparent()" trait="_WorldMapWidth" />
				</add>
				<sub>
					<copy src="me()" trait="width" />
					<div> 2 </div>
				</sub>
			</x>
			<y>
				<copy src="grandparent()" trait="_WorldMapY" />
				<add>
					<copy src="me()" trait="_y" />
					<mul src="grandparent()" trait="_WorldMapWidth" />
				</add>
				<sub>
					<copy src="me()" trait="height" />
					<div> 2 </div>
				</sub>
			</y>
			<width>
				<copy> 36 </copy>
				<add>
					<copy> 36 </copy>
					<mul src="me()" trait="_timeline" />
				</add>
				<min> 72 </min>
				<mul src="grandparent()" trait="_IconScaleMul" />
			</width>
			<height> <copy src="me()" trait="width" /> </height>
			<filename>
				<copy src="me()" trait="_type" />
				<copy src="grandparent" trait="_MapMarker_" />
			</filename>
			<_location> Location </_location>
			<_timeline> 1 </_timeline>
			<_fade> 1 </_fade>
			<_type> 0 </_type>
			<_PosX> 0 </_PosX>
			<_PosY> 0 </_PosY>
			<_PosXOffset>
				<copy src="me()" trait="_PosX" />
				<sub src="grandparent()" trait="_PlrWldX" />
			</_PosXOffset>
			<_PosYOffset>
				<copy src="grandparent()" trait="_PlrWldY" />
				<sub src="me()" trait="_PosY" />
			</_PosYOffset>
			<_x>
				<copy src="grandparent()" trait="_PlrWldX" />
				<add>
					<copy src="me()" trait="_PosXOffset" />
					<mul src="grandparent()" trait="_CellPlrDegCos" />
				</add>
				<sub>
					<copy src="me()" trait="_PosYOffset" />
					<mul src="grandparent()" trait="_CellPlrDegSin" />
				</sub>
			</_x>
			<_y>
				<copy src="grandparent()" trait="_PlrWldY" />
				<sub>
					<copy src="me()" trait="_PosXOffset" />
					<mul src="grandparent()" trait="_CellPlrDegSin" />
				</sub>
				<sub>
					<copy src="me()" trait="_PosYOffset" />
					<mul src="grandparent()" trait="_CellPlrDegCos" />
				</sub>
			</_y>

			<image name="Icon">
				<visible> <copy src="parent()" trait="visible" /> </visible>
				<alpha>
					<copy> 255 </copy>
					<sub>
						<copy> 255 </copy>
						<mul src="parent()" trait="_timeline" />
					</sub>
					<max> 0 </max>
				</alpha>
				<depth> 0 </depth>
				<x>	0 </x>
				<y> 0 </y>
				<width> <copy src="parent()" trait="width" /> </width>
				<height> <copy src="parent()" trait="height" /> </height>
				<zoom> &scale; </zoom>
				<systemcolor> <copy src="ModernMinimap" trait="_systemcolor_-1" /> </systemcolor>
				<brightness> 255 </brightness>
				<filename> <copy src="parent()" trait="filename" /> </filename>
			</image>

			<text name="LocationName">
				<visible> 1 </visible>
				<alpha>
					<copy src="parent()" trait="_timeline" />
					<mul src="parent()" trait="_fade" />
					<mul> 255 </mul>
				</alpha>
				<depth> 0 </depth>
				<x>
					<copy src="parent()" trait="width" />
					<div> 2 </div>
					<sub> 2 </sub>
				</x>
				<y>
					<copy src="parent()" trait="width" />
					<div> 2 </div>
					<add>
						<copy> 18 </copy>
						<mul src="ModernMinimap" trait="_IconScaleMul" />
					</add>
				</y>
				<zoom>
					<copy> 57.5 </copy>
					<mul src="ModernMinimap" trait="_IconScaleMul" />
				</zoom>
				<systemcolor> <copy src="ModernMinimap" trait="_systemcolor_0" /> </systemcolor>
				<brightness> 255 </brightness>
				<font> 7 </font>
				<justify> &center; </justify>
				<wrapwidth>
					<copy> 225 </copy>
					<mul src="ModernMinimap" trait="_IconScaleMul" />
				</wrapwidth>
				<string> <copy src="parent()" trait="_location" /> </string>
			<_VUI+OutlineIntensity>3</_VUI+OutlineIntensity>
	<_VUI+ShadowOffset>1</_VUI+ShadowOffset>
</text>
<include src="VUI+\outline.xml"/>
		</hotrect>
	</rect>
</template>

<!-- World Map Quest Marker Rect -->
<template name="WorldMap_Quest_Rect">
	<rect name="WorldMap_Quest_Rect">
		<visible>
			<not src="parent()" trait="_MapMode" />
			<and src="parent()" trait="_ToggleUpdate" />
			<and src="parent()" trait="_ShowQuest" />
			<and> <not src="parent()" trait="_Interior" /> </and>
		</visible>
		<width> <copy src="parent()" trait="width" /> </width>
		<height> <copy src="parent()" trait="height" /> </height>
	</rect>
</template>

<!-- World Map Marker Template -->
<template name="Minimap_Icon_World_Template">
	<hotrect name="Minimap_Icon_World_Template">
		<visible> 1 </visible>
		<alpha> 0 </alpha>
		<locus> 1 </locus>
		<depth>
			<copy src="me()" trait="_DepthMod" />
			<mul> 2 </mul>
		</depth>
		<x>
			<copy src="grandparent()" trait="_WorldMapX" />
			<add>
				<copy src="me()" trait="_x" />
				<mul src="grandparent()" trait="_WorldMapWidth" />
			</add>
			<sub>
				<copy src="me()" trait="width" />
				<div> 2 </div>
			</sub>
		</x>
		<y>
			<copy src="grandparent()" trait="_WorldMapY" />
			<add>
				<copy src="me()" trait="_y" />
				<mul src="grandparent()" trait="_WorldMapWidth" />
			</add>
			<sub>
				<copy src="me()" trait="height" />
				<div> 2 </div>
			</sub>
		</y>
		<width> <copy src="grandparent()" trait="_IconWorldSize" /> </width>
		<height> <copy src="me()" trait="width" /> </height>
		<clips> 1 </clips>
		<_show_location> 0 </_show_location>
		<_location> Location </_location>
		<_type> 0 </_type>
		<_visible> 0 </_visible>
		<_PosX> 0 </_PosX>
		<_PosY> 0 </_PosY>
		<_DepthMod> 0 </_DepthMod>
		<_PosXOffset>
			<copy src="me()" trait="_PosX" />
			<sub src="grandparent()" trait="_PlrWldX" />
		</_PosXOffset>
		<_PosYOffset>
			<copy src="grandparent()" trait="_PlrWldY" />
			<sub src="me()" trait="_PosY" />
		</_PosYOffset>
		<_x>
			<copy src="grandparent()" trait="_PlrWldX" />
			<add>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="grandparent()" trait="_CellPlrDegCos" />
			</add>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="grandparent()" trait="_CellPlrDegSin" />
			</sub>
		</_x>
		<_y>
			<copy src="grandparent()" trait="_PlrWldY" />
			<sub>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="grandparent()" trait="_CellPlrDegSin" />
			</sub>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="grandparent()" trait="_CellPlrDegCos" />
			</sub>
		</_y>
		<_filename>
			<copy src="me()" trait="_type" />
			<onlyif>
				<copy src="me()" trait="_visible" />
				<eq> 2 </eq>
			</onlyif>
			<copy src="grandparent" trait="_MapMarker_" />
		</_filename>

		<image name="Icon">
			<visible> 1 </visible>
			<alpha> 255 </alpha>
			<depth> 0 </depth>
			<x>	0 </x>
			<y> 0 </y>
			<height> <copy src="parent()" trait="height" /> </height>
			<width> <copy src="parent()" trait="width" /> </width>
			<zoom> &scale; </zoom>
			<systemcolor> <copy src="ModernMinimap" trait="_systemcolor_map" /> </systemcolor>
			<brightness> 255 </brightness>
			<filename> <copy src="parent()" trait="_filename" /> </filename>
		</image>

		<image name="DropShadow">
			<visible> 1 </visible>
			<alpha> 127.5 </alpha>
			<depth> -1 </depth>
			<x>	<copy src="ModernMinimap" trait="_DropShadowOffset" /> </x>
			<y> <copy src="me()" trait="x" /> </y>
			<height> <copy src="parent()" trait="height" /> </height>
			<width> <copy src="parent()" trait="width" /> </width>
			<zoom> &scale; </zoom>
			<systemcolor> 0 </systemcolor>
			<red> 0 </red>
			<green> 0 </green>
			<blue> 0 </blue>
			<brightness> 255 </brightness>
			<filename> <copy src="sibling(icon)" trait="filename" /> </filename>
		</image>

	</hotrect>
</template>

<!-- Local Map Icon Template -->
<template name="Minimap_Icon_Local_Template">
	<hotrect name="Minimap_Icon_Local_Template">
		<visible>
			<copy src="grandparent()" trait="_DistCalc" />
			<gte src="me()" trait="_Dist" />
			<and>
				<copy src="me()" trait="_Hostile" />
				<gt> -2 </gt>
			</and>
		</visible>
		<alpha> 0 </alpha>
		<locus> 1 </locus>
		<depth>
			<copy src="me()" trait="_DepthMod" />
			<mul> 2 </mul>
		</depth>
		<x>
			<copy src="me()" trait="_x" />
			<mul src="parent()" trait="width" />
			<sub>
				<copy src="me()" trait="width" />
				<div> 2 </div>
			</sub>
		</x>
		<y>
			<copy src="me()" trait="_y" />
			<mul src="parent()" trait="height" />
			<sub>
				<copy src="me()" trait="height" />
				<div> 2 </div>
			</sub>
		</y>
		<width> <copy src="grandparent()" trait="_IconLocalSize" /> </width>
		<height> <copy src="me()" trait="width" /> </height>
		<clips> 1 </clips>
		<filename> Interface\Stentorious\ModernMinimap\Actor.dds </filename>

		<_PosX> 0 </_PosX>
		<_PosY> 0 </_PosY>
		<_PosZ> <copy src="grandparent()" trait="_PlrZ" /> </_PosZ>
		<_Deg> -1 </_Deg>
		<_Dist> 0 </_Dist>
		<_Hostile> -1 </_Hostile>
		<_DepthMod> 0 </_DepthMod>
		<_PosXOffset>
			<copy src="me()" trait="_PosX" />
			<sub src="grandparent()" trait="_PlrX" />
			<mul src="grandparent()" trait="_WorldScale" />
		</_PosXOffset>
		<_PosYOffset>
			<copy src="me()" trait="_PosY" />
			<sub src="grandparent()" trait="_PlrY" />
			<mul src="grandparent()" trait="_WorldScale" />
		</_PosYOffset>
		<_PosZOffset>
			<copy src="me()" trait="_PosZ" />
			<sub src="grandparent()" trait="_PlrZ" />
		</_PosZOffset>
		<_DegOffset>
			<copy> 0 </copy>
			<add>
				<copy src="grandparent()" trait="_PlrDeg" />
				<onlyif src="grandparent()" trait="_RotationMode" />
			</add>
			<add>
				<copy src="grandparent()" trait="_CellDeg" />
				<onlyifnot src="grandparent()" trait="_RotationMode" />
			</add>
			<sub src="me()" trait="_Deg" />
			<div> 360 </div>
		</_DegOffset>
		<_Level>
			<copy> 0 </copy>
			<add>
				<copy> 1 </copy>
				<onlyif>
					<copy src="me()" trait="_PosZOffset" />
					<gt> 175 </gt>
				</onlyif>
			</add>
			<add>
				<copy> 2 </copy>
				<onlyif>
					<copy src="me()" trait="_PosZOffset" />
					<lt> -175 </lt>
				</onlyif>
			</add>
		</_Level>
		<_x>
			<copy> 0.5 </copy>
			<add>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="grandparent()" trait="_IconDegCos" />
			</add>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="grandparent()" trait="_IconDegSin" />
			</sub>
		</_x>
		<_y>
			<copy> 0.5 </copy>
			<sub>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="grandparent()" trait="_IconDegSin" />
			</sub>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="grandparent()" trait="_IconDegCos" />
			</sub>
		</_y>
		<_Height> <copy src="grandparent()" trait="_Height"/> </_Height>

		<image name="Icon">
			<visible> 1 </visible>
			<alpha>
				<copy> 255 </copy>
				<sub>
					<copy src="parent()" trait="_Dist" />
					<pow> 6 </pow>
					<div>
						<copy src="ModernMinimap" trait="_DistCalc" />
						<pow> 6 </pow>
					</div>
					<mul> 255 </mul>
					<onlyif src="ModernMinimap" trait="_Fade" />
				</sub>
				<max> 0 </max>
				<min> 255 </min>
			</alpha>
			<depth> 0 </depth>
			<x>	0 </x>
			<y> 0 </y>
			<rotateaxisx>
				<copy src="me()" trait="width" />
				<div> 2 </div>
			</rotateaxisx>
			<rotateaxisy>
				<copy src="me()" trait="height" />
				<div> 2 </div>
			</rotateaxisy>
			<rotateangle>
				<copy> 6.2831 </copy>
				<mul src="parent()" trait="_DegOffset" />
				<onlyifnot>
					<copy src="parent()" trait="_Deg" />
					<eq> -1 </eq>
				</onlyifnot>
			</rotateangle>
			<height> <copy src="parent()" trait="height" /> </height>
			<width> <copy src="parent()" trait="width" /> </width>
			<zoom> &scale; </zoom>
			<systemcolor>
				<copy src="parent()" trait="_Hostile" />
				<copy src="ModernMinimap" trait="_systemcolor_" />
			</systemcolor>
			<red>
				<copy src="parent()" trait="_Hostile" />
				<copy src="ModernMinimap" trait="_red_" />
			</red>
			<green>
				<copy src="parent()" trait="_Hostile" />
				<copy src="ModernMinimap" trait="_green_" />
			</green>
			<blue>
				<copy src="parent()" trait="_Hostile" />
				<copy src="ModernMinimap" trait="_blue_" />
			</blue>
			<brightness> 255 </brightness>
			<filename> <copy src="parent()" trait="filename" /> </filename>
		</image>

		<image name="DropShadow">
			<visible> 1 </visible>
			<alpha>
				<copy src="sibling(Icon)" trait="alpha" />
				<div> 2 </div>
			</alpha>
			<depth> -1 </depth>
			<x>	<copy src="ModernMinimap" trait="_DropShadowOffset" /> </x>
			<y> <copy src="me()" trait="x" /> </y>
			<rotateaxisx> <copy src="sibling(Icon)" trait="rotateaxisx" /> </rotateaxisx>
			<rotateaxisy> <copy src="sibling(Icon)" trait="rotateaxisy" /> </rotateaxisy>
			<rotateangle> <copy src="sibling(Icon)" trait="rotateangle" /> </rotateangle>
			<height> <copy src="parent()" trait="height" /> </height>
			<width> <copy src="parent()" trait="width" /> </width>
			<zoom> &scale; </zoom>
			<systemcolor> 0 </systemcolor>
			<red> 0 </red>
			<green> 0 </green>
			<blue> 0 </blue>
			<brightness> 255 </brightness>
			<filename> <copy src="sibling(Icon)" trait="filename" /> </filename>
		</image>

		<image name="HeightIndicator">
			<visible>
				<copy src="parent()" trait="_Level" />
				<gt> 0 </gt>
				<and src="parent()" trait="_Height"/>
			</visible>
			<alpha> <copy src="sibling(Icon)" trait="alpha" /> </alpha>
			<depth> 0 </depth>
			<x>
				<copy src="parent()" trait="width" />
				<sub src="me()" trait="width" />
				<div> 2 </div>
			</x>
			<y>
				<copy src="parent()" trait="height" />
				<div> 2 </div>
				<add>
					<copy src="parent()" trait="height" />
					<add src="me()" trait="height" />
					<div> 1.5 </div>
					<onlyif>
						<copy src="parent()" trait="_Level" />
						<eq> 2 </eq>
					</onlyif>
				</add>
				<sub>
					<copy src="parent()" trait="height" />
					<add src="me()" trait="height" />
					<div> 1.5 </div>
					<onlyif>
						<copy src="parent()" trait="_Level" />
						<eq> 1 </eq>
					</onlyif>
				</sub>
			</y>
			<rotateaxisx>
				<copy src="me()" trait="width" />
				<div> 2 </div>
			</rotateaxisx>
			<rotateaxisy> 0 </rotateaxisy>
			<rotateangle>
				<copy> 3.1416 </copy>
				<onlyif>
					<copy src="parent()" trait="_Level" />
					<eq> 2 </eq>
				</onlyif>
			</rotateangle>
			<height>
				<copy src="sibling(Icon)" trait="height" />
				<div> 4 </div>
			</height>
			<width> <copy src="me()" trait="height" /> </width>
			<zoom> &scale; </zoom>
			<systemcolor> <copy src="ModernMinimap" trait="_systemcolor_0" /> </systemcolor>
			<brightness> <copy src="sibling(Icon)" trait="brightness" /> </brightness>
			<filename> Interface\Stentorious\ModernMinimap\HeightIndicator.dds </filename>
		</image>
	</hotrect>
</template>

<!-- Local Map Player Path Template -->
<template name="Minimap_Player_Path_Template">
	<image name="Minimap_Player_Path_Template">
		<visible> 1 </visible>
		<alpha>
			<copy src="me()" trait="_Fade" />
			<min> 255 </min>
		</alpha>
		<depth> 1 </depth>
		<x>
			<copy src="me()" trait="_x" />
			<mul src="parent()" trait="width" />
			<sub>
				<copy src="me()" trait="width" />
				<div> 2 </div>
			</sub>
		</x>
		<y>
			<copy src="me()" trait="_y" />
			<mul src="parent()" trait="height" />
			<sub>
				<copy src="me()" trait="height" />
				<div> 2 </div>
			</sub>
		</y>
		<width> <copy src="grandparent()" trait="_PlayerPathSize" /> </width>
		<height> <copy src="me()" trait="width" /> </height>
		<zoom> &scale; </zoom>
		<clips> 1 </clips>
		<systemcolor> <copy src="grandparent()" trait="_systemcolor_0" /> </systemcolor>
		<brightness> 255 </brightness>
		<filename> Interface\Stentorious\ModernMinimap\PlayerPath.dds </filename>
		<_PosX> 0 </_PosX>
		<_PosY> 0 </_PosY>
		<_Fade> 255 </_Fade>
		<_PosXOffset>
			<copy src="me()" trait="_PosX" />
			<sub src="grandparent()" trait="_PlrX" />
			<mul src="grandparent()" trait="_WorldScale" />
		</_PosXOffset>
		<_PosYOffset>
			<copy src="me()" trait="_PosY" />
			<sub src="grandparent()" trait="_PlrY" />
			<mul src="grandparent()" trait="_WorldScale" />
		</_PosYOffset>
		<_x>
			<copy> 0.5 </copy>
			<add>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="grandparent()" trait="_IconDegCos" />
			</add>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="grandparent()" trait="_IconDegSin" />
			</sub>
		</_x>
		<_y>
			<copy> 0.5 </copy>
			<sub>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="grandparent()" trait="_IconDegSin" />
			</sub>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="grandparent()" trait="_IconDegCos" />
			</sub>
		</_y>
	</image>
</template>

<!-- Local Quest/Player Marker Template -->
<template name="Minimap_Quest_Local_Template">
	<image name="Minimap_Quest_Local_Template">
		<visible> 1 </visible>
		<alpha> <copy src="grandparent()" trait="_IconQuestAlpha" /> </alpha>
		<locus> 1 </locus>
		<depth> <copy src="me()" trait="_DepthMod" /> </depth>
		<x>
			<copy src="me()" trait="_x" />
			<mul src="parent()" trait="width" />
			<sub>
				<copy src="me()" trait="width" />
				<div> 2 </div>
			</sub>
			<max src="grandparent()" trait="_MarkerMaxX" />
			<min src="grandparent()" trait="_MarkerMinX" />
		</x>
		<y>
			<copy src="me()" trait="_y" />
			<mul src="parent()" trait="width" />
			<sub>
				<copy src="me()" trait="height" />
				<div> 2 </div>
			</sub>
			<max> 2 </max>
			<min>
				<add src="parent()" trait="width" />
				<sub src="me()" trait="height" />
				<sub> 2 </sub>
			</min>
		</y>
		<width> <copy src="grandparent()" trait="_IconQuestSize" /> </width>
		<height>
			<copy src="me()" trait="width" />
			<mul> 2 </mul>
		</height>
		<zoom> &scale; </zoom>
		<clips> 1 </clips>
		<systemcolor> <copy src="grandparent()" trait="_systemcolor_0" /> </systemcolor>
		<filename>
			<copy> 3 </copy>
			<onlyif src="me()" trait="_Custom" />
			<add src="me()" trait="_Level" />
			<copy src="grandparent" trait="_QuestMarker_" />
		</filename>

		<_Custom> 0 </_Custom>

		<!-- Calculate marker position to remain in the bounds of the map -->
		<_x1>
			<copy> 0 </copy>
			<add>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="grandparent()" trait="_IconDegCos" />
			</add>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="grandparent()" trait="_IconDegSin" />
			</sub>
		</_x1>
		<_y1>
			<copy> 0 </copy>
			<sub>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="grandparent()" trait="_IconDegSin" />
			</sub>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="grandparent()" trait="_IconDegCos" />
			</sub>
		</_y1>
		<_scaler>
			<copy src="grandparent()" trait="_ScalerWidthLocal" />
			<div>
				<copy src="me()" trait="_x1" />
				<abs></abs>
			</div>
			<min>
				<copy src="grandparent()" trait="_ScalerHeightLocal" />
				<div>
					<copy src="me()" trait="_y1" />
					<abs></abs>
				</div>
			</min>
		</_scaler>
		<_x>
			<copy> 0.5 </copy>
			<add>
				<copy src="me()" trait="_x1" />
				<onlyif>
					<copy src="me()" trait="_scaler" />
					<gte> 1 </gte>
				</onlyif>
			</add>
			<add>
				<copy src="me()" trait="_x1" />
				<mul src="me()" trait="_scaler" />
				<onlyif>
					<copy src="me()" trait="_scaler" />
					<lt> 1 </lt>
				</onlyif>
			</add>
		</_x>
		<_y>
			<copy> 0.5 </copy>
			<add>
				<copy src="me()" trait="_y1" />
				<onlyif>
					<copy src="me()" trait="_scaler" />
					<gte> 1 </gte>
				</onlyif>
			</add>
			<add>
				<copy src="me()" trait="_y1" />
				<mul src="me()" trait="_scaler" />
				<onlyif>
					<copy src="me()" trait="_scaler" />
					<lt> 1 </lt>
				</onlyif>
			</add>
		</_y>
		<_PosX> 0 </_PosX>
		<_PosY> 0 </_PosY>
		<_PosZ> <copy src="grandparent()" trait="_PlrZ" /> </_PosZ>
		<_DepthMod> 0 </_DepthMod>
		<_PosXOffset>
			<copy src="me()" trait="_PosX" />
			<sub src="grandparent()" trait="_PlrX" />
			<mul src="grandparent()" trait="_WorldScale" />
		</_PosXOffset>
		<_PosYOffset>
			<copy src="me()" trait="_PosY" />
			<sub src="grandparent()" trait="_PlrY" />
			<mul src="grandparent()" trait="_WorldScale" />
		</_PosYOffset>
		<_PosZOffset>
			<copy src="me()" trait="_PosZ" />
			<sub src="grandparent()" trait="_PlrZ" />
		</_PosZOffset>
		<_Level>
			<copy> 0 </copy>
			<add>
				<copy> 1 </copy>
				<onlyif>
					<copy src="me()" trait="_PosZOffset" />
					<gt> 175 </gt>
					<and src="grandparent()" trait="_QuestHeight" />
				</onlyif>
			</add>
			<add>
				<copy> 2 </copy>
				<onlyif>
					<copy src="me()" trait="_PosZOffset" />
					<lt> -175 </lt>
					<or> <not src="grandparent()" trait="_QuestHeight" /> </or>
				</onlyif>
			</add>
		</_Level>
	</image>
</template>

<!-- World Quest/Player Marker Template -->
<template name="Minimap_Quest_World_Template">
	<image name="Minimap_Quest_World_Template">
		<visible> 1 </visible>
		<alpha> <copy src="grandparent()" trait="_IconQuestAlpha" /> </alpha>
		<locus> 1 </locus>
		<depth> <copy src="me()" trait="_DepthMod" /> </depth>
		<x>
			<copy src="grandparent()" trait="_WorldMapX" />
			<add>
				<copy src="me()" trait="_x" />
				<mul src="grandparent()" trait="_WorldMapWidth" />
			</add>
			<sub>
				<copy src="me()" trait="width" />
				<div> 2 </div>
			</sub>
			<max src="grandparent()" trait="_MarkerMaxX" />
			<min src="grandparent()" trait="_MarkerMinX" />
		</x>
		<y>
			<copy src="grandparent()" trait="_WorldMapY" />
			<add>
				<copy src="me()" trait="_y" />
				<mul src="grandparent()" trait="_WorldMapWidth" />
			</add>
			<sub>
				<copy src="me()" trait="height" />
				<div> 2 </div>
			</sub>
			<max> 2 </max>
			<min>
				<add src="parent()" trait="width" />
				<sub src="me()" trait="height" />
				<sub> 2 </sub>
			</min>
		</y>
		<width> <copy src="grandparent()" trait="_IconQuestSize" /> </width>
		<height>
			<copy src="me()" trait="width" />
			<mul> 2 </mul>
		</height>
		<zoom> &scale; </zoom>
		<clips> 1 </clips>
		<systemcolor> <copy src="grandparent()" trait="_systemcolor_0" /> </systemcolor>
		<filename> Interface\Stentorious\ModernMinimap\MarkerQuestAbove.dds </filename>
		<_PosX> 0 </_PosX>
		<_PosY> 0 </_PosY>
		<_DepthMod> 0 </_DepthMod>
		<_PosXOffset>
			<copy src="me()" trait="_PosX" />
			<sub src="grandparent()" trait="_PlrWldX" />
		</_PosXOffset>
		<_PosYOffset>
			<copy src="grandparent()" trait="_PlrWldY" />
			<sub src="me()" trait="_PosY" />
		</_PosYOffset>
		<_x1>
			<copy> 0 </copy>
			<add>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="grandparent()" trait="_CellPlrDegCos" />
			</add>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="grandparent()" trait="_CellPlrDegSin" />
			</sub>
		</_x1>
		<_y1>
			<copy> 0 </copy>
			<sub>
				<copy src="me()" trait="_PosXOffset" />
				<mul src="grandparent()" trait="_CellPlrDegSin" />
			</sub>
			<sub>
				<copy src="me()" trait="_PosYOffset" />
				<mul src="grandparent()" trait="_CellPlrDegCos" />
			</sub>
		</_y1>
		<_scaler>
			<copy src="grandparent()" trait="_ScalerWidthWorld" />
			<div>
				<copy src="me()" trait="_x1" />
				<abs></abs>
			</div>
			<min>
				<copy src="grandparent()" trait="_ScalerHeightWorld" />
				<div>
					<copy src="me()" trait="_y1" />
					<abs></abs>
				</div>
			</min>
		</_scaler>
		<_x>
			<copy src="grandparent()" trait="_PlrWldX" />
			<add>
				<copy src="me()" trait="_x1" />
				<onlyif>
					<copy src="me()" trait="_scaler" />
					<gte> 1 </gte>
				</onlyif>
			</add>
			<add>
				<copy src="me()" trait="_x1" />
				<mul src="me()" trait="_scaler" />
				<onlyif>
					<copy src="me()" trait="_scaler" />
					<lt> 1 </lt>
				</onlyif>
			</add>
		</_x>
		<_y>
			<copy src="grandparent()" trait="_PlrWldY" />
			<add>
				<copy src="me()" trait="_y1" />
				<onlyif>
					<copy src="me()" trait="_scaler" />
					<gte> 1 </gte>
				</onlyif>
			</add>
			<add>
				<copy src="me()" trait="_y1" />
				<mul src="me()" trait="_scaler" />
				<onlyif>
					<copy src="me()" trait="_scaler" />
					<lt> 1 </lt>
				</onlyif>
			</add>
		</_y>
	</image>
</template>